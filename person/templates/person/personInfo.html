{% extends "person/base_home.html" %}	

{% block css %}
	<link href="/static/css/jquery/jquery-ui.css" rel="stylesheet" type="text/css" />
	<link href="/static/css/jquery/style.css" rel="stylesheet" type="text/css" />
	<link href="/static/css/jquery/jquery.fancybox.css" rel="stylesheet" type="text/css" />
	<link href="/static/css/person/person_info.css" rel="stylesheet" type="text/css" />
	<link href="/static/css/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<style type="text/css">
		
		* {
			margin: 0px;
			padding: 0px;
		}
		
		label{
		}
		
		input[type="text"], input[type="password"] {
			height:30px;	
		}		
		
		.additional{
			display:block;
		}
		
		.required input[type="text"]:focus{
			border:1px solid red;	
		}

		.the-legend {
	    border-width: 0;
	    font-size: 20px;
	    line-height: 20px;
	    margin-bottom: 0;
			width:150px;
			text-align:center;
			background-color:rgb(228,223,223);
			height:10px;
			padding:10px;
		}
		.the-fieldset {
  		width:750px;  
			border: 2px groove threedface #444;
    	-webkit-box-shadow:  0px 0px 0px 0px #000;
      box-shadow:  0px 0px 0px 0px #000;
		}
		
		.required {
			font-weight: bold;
		}
		
		.required label:after {
			color: #e32;
			content: '*';
			display:inline;
		}
		
		.child_form{
			padding-left:3px;
			background-color:;
			border-radius:4px;
			-webkit-border-radius:4px;
			border:1px solid rgba(0, 0, 0, 0.05);
			box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);
			-webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);		
			margin:0px auto;	
		}
		
		#spouse_form{
			padding-left:3px;
			background-color:;
			border-radius:4px;
			-webkit-border-radius:4px;
			border:1px solid rgba(0, 0, 0, 0.05);
			box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);
			-webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);		
		}

		.content_form {
			height:auto;
			width:auto;
			padding:0px;
		}

		.form_tab{
			width:720px;
			height:auto;
			margin:0px auto;	
		}
		.messages{
			padding:10px;
			height:auto;
			width:600px;
			background-color:whiteSmoke;
			border-radius:4px;
			-webkit-border-radius:4px;
			border:1px solid rgba(0, 0, 0, 0.05);
			box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);
			-webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.05);		
			margin:0px auto;		
		}

		.messages-div{
			height:32px;	
		}

		body{	
			background-color:#8EB4E3;	
		}

		

	</style>

{% endblock %}

{% block app-content %}

		<div style="width:auto; height:auto; margin:0 auto;">
	<div class="tabbable" style="height:38px;background-color:lightblue;">
		<ul class="nav nav-tabs" style="background-color:lightblue;width:460px;margin:0 auto;">
			<li class="active"><a href="#basic" data-toggle="tab">Basic</a></li>
			<li><a href="#contacts" data-toggle="tab">Contacts</a></li>
			<li><a href="#education" data-toggle="tab">Education</a></li>
			<li><a href="#career" data-toggle="tab">Career</a></li>
			<li><a href="#interests" data-toggle="tab">Interests</a></li>
			<li><a href="#spouse" data-toggle="tab">Family</a></li>
		</ul>
			<div class="div-messages">
				{% if messages %}
				<div class="messages">
					{% for message in messages %}
						<div{% if message.tags %} class="control-group {{ message.tags }} messages-div"{% endif %}><p class="text-{{ message.tags }} messages-p">- {{ message }}<p></div>
					{% endfor %}
				</div>
				{% endif %}  	
				<br/>
			</div>
	
		<div class="content_form tab-content" style="clear:both;">
			<div class="form_tab tab-pane active" id="basic">		
			<form action="" method="POST" enctype="multipart/form-data">
		{% csrf_token %}
			<!--BASIC FORM BEGINS-->
				<fieldset class="well the-fieldset">
					<legend class="well the-legend">BASIC</legend>
					<div class="required">
						<label for="name">Name: </label>
						<input type="text" name="name" id="name" value="{% if person.name %}{{ person.name }}{% endif %}" />
						<span style="color:#b94a48;" class="help-inline"></span>					
					</div>			
					
					<div>
						<label for="nickname">Nickname: </label>
						<input type="text" name="nickname" id="nickname" value="{% if person.nickname %}{{ person.nickname }}{% endif %}" />
					</div>
					<div class="controls">	
						<label for="gender">Gender: </label>		
						<div id="gender" class="btn-group" data-toggle="buttons-radio">
							<button type="button" name="male" class="gender-button btn btn-info active">Male</button>
							<button type="button" name="female" class="gender-button btn btn-info">Female</button>
							<input type="hidden" name="gender" value="male" />
						</div>
					</div>

					<div class="required">	
						<label for="datepicker">Birth date: </label>
						<input type="text" name="birthdate" id="datepicker" value="{% if person.birthdate %}{{ person.birthdate }}{% endif %}"  />
					  <span style="color:#b94a48;" class="help-inline"></span>					
					
						<div>
									<button name="basic" class="ajax-button btn btn-primary">Submit</button>
					
						</div>	
					</div>
				</fieldset>
			<!--BASIC ENDS-->
			</form>
			</div>
			<div class="form_tab tab-pane" id="contacts">
			<form action="" method="POST" enctype="multipart/form-data">
			<!--CONTACTS BEGIN-->
		{% csrf_token %}
				<fieldset class="well the-fieldset">
					<legend class="well the-legend">CONTACTS</legend>
					<!--MAP 1 BEGINS-->
					<div class='clearfix1' class="required">
						<div class="required">
							<div class='required input input-positioned'>
								<label>Current Principal Address : </label> <input type="text" name="principal_address" class="addresspicker_map1" value="{{ person.contacts.principal_address|default_if_none:'Roorkee, Uttarakhand, India' }}"   />   <br/>
								<label>City: </label> <input name="city1" type="text" id="locality" value="{{ person.contacts.city|default_if_none:'' }}"/> <br/>
								<label>State/Province: </label> <input name="state1" type="text" id="administrative_area_level_1" value="{{ person.contacts.state|default_if_none:'' }}" /> <br/>
								<label>Country:  </label> <input name="country1" type="text" id="country" value="{{ person.contacts.country|default_if_none:'' }}" /> <br/>	

					   	 	<span style="color:#b94a48;" class="help-inline"><span>						
							</div>
						</div>
						<div class='map-wrapper1' id="map-wrapper1">
							<label id="geo_label1" for="reverseGeocode1">Reverse Geocode after Marker Drag?</label>
							<select id="reverseGeocode1">
								<option value="false" selected>No</option>
								<option value="true">Yes</option>
							</select><br/>
							<div id="map1"></div>
							<div class="additional">You can drag and drop the marker to the correct location</div>
						</div>
					</div>
					<br/>
					<!--MAP 2 BEGINS-->
					<div class='clearfix2' style="display:none">
						<div class='input input-positioned'>
							<label>Alternate Address1 : </label> <input type="text" name="alternate_address1" class="addresspicker_map2" value="{% if person.contacts.alternate_address1 %}{{ person.contacts.alternate_address1 }}{% else %}{% endif %}"  />   <br/>
						</div>
						<div class='map-wrapper2' id="map-wrapper2">
							<label id="geo_label2" for="reverseGeocode2">Reverse Geocode after Marker Drag?</label>
							<select id="reverseGeocode2">
								<option value="false" selected>No</option>
								<option value="true">Yes</option>
							</select><br/>
							<div id="map2"></div>
								<div class="additional">You can drag and drop the marker to the correct location</div>
						</div>
					</div>
					<br/>
					<!--MAP 3 BEGINS-->
					<div class='clearfix3' style="display:none;">
						<div class='input input-positioned'>
							<label>Alternate Address2 : </label> <input type="text" name="alternate_address2" class="addresspicker_map3" value="{% if person.contacts.alternate_address2 %}{{ person.contacts.alternate_address2 }}{% else %}{% endif %}"  />   <br/>
						</div>

						<div class='map-wrapper3' id="map-wrapper3">
							<label id="geo_label3" for="reverseGeocode3">Reverse Geocode after Marker Drag?</label>
							<select id="reverseGeocode3">
								<option value="false" selected>No</option>
								<option value="true">Yes</option>
							</select><br/>
							<div id="map3"></div>
								<div class="additional">You can drag and drop the marker to the correct location</div>
						</div>
					</div>
					<br/>
					<!--MAP 4 BEGINS-->
					<div class='clearfix4' style='display:none;'>
						<div class='input input-positioned'>
							<label>Alternate Address3 : </label> <input type="text" name="alternate_address3" class="addresspicker_map4" value="{% if person.contacts.alternate_address3 %}{{ person.contacts.alternate_address3 }}{% else %}{% endif %}"  />   <br/>
						</div>

						<div class='map-wrapper4' id="map-wrapper4">
							<label id="geo_label4" for="reverseGeocode4">Reverse Geocode after Marker Drag?</label>
							<select id="reverseGeocode4">
								<option value="false" selected>No</option>
								<option value="true">Yes</option>
							</select><br/>
							<div id="map4"></div>
								<div class="additional">You can drag and drop the marker to the correct location</div>
						</div>
					</div>
					<button id="alternate_button" class="btn btn-info" name="alternate_button">Add alternate address</button>
					<br/>
					<br/>	
					<!-- PHONES -->
					<div><u>Current Phones: </u></div>
					<br/>
					<div class="required">
						<label for="phone_home">Home: </label>
						<input type="text" name="phone_home" id="phone_home" value="{% if person.contacts.home_phone %}{{ person.contacts.home_phone }}{% endif %}"  />
					  <span style="color:#b94a48;" class="help-inline"></span>										
						<span class="additional">	
							 &nbsp; Do you want to display this number on your profile to others?
							<input type="radio" name="show_phone_home" value="yes" {% if person.contacts.show_home_phone %}checked{% endif %}/>Yes
							<input type="radio" name="show_phone_home" value="no" {% if not person.contacts.show_home_phone %}checked{% endif %}/>No &nbsp; 
						</span>
					</div>
					<div>
						<label for="phone_mobile">Mobile: </label>
						<input type="text" name="phone_mobile" id="phone_mobile" value="{% if person.contacts.mobile_phone %}{{ person.contacts.mobile_phone }}{% endif %}" />
						<span class="additional">	
							 &nbsp; Do you want to display this number on your profile to others?
							<input type="radio" name="show_phone_mobile" value="yes" {% if person.contacts.show_mobile_phone %}checked{% endif %}/>Yes
							<input type="radio" name="show_phone_mobile" value="no" {% if not person.contacts.show_mobile_phone %}checked{% endif %}/>No &nbsp; 
						</div>
					</span>
					<div>
						<label for="phone_work">Work: </label>
						<input type="text" name="phone_work" id="phone_work" value="{% if person.contacts.work_phone %}{{ person.contacts.work_phone }}{% endif %}" />
						<span class="additional">
							 &nbsp; Do you want to display this number on your profile to others?
							<input type="radio" name="show_phone_work" value="yes" {% if person.contacts.show_work_phone %}checked{% endif %} />Yes
							<input type="radio" name="show_phone_work" value="no" {% if not person.contacts.show_work_phone %}checked{% endif %}/>No &nbsp; 
						</span>
					<div><button name="contacts" class="ajax-button btn btn-primary">Submit</button></div>
					</div>
				</fieldset>

			
				<!--CONTACTS END-->	
			</form>
				</div>
			<div class="form_tab tab-pane" id="education">
			<form action="" method="POST" enctype="multipart/form-data">
		{% csrf_token %}
			<!--EDUCATION BEGINS-->	
				<fieldset class="well the-fieldset">
					<legend class="well the-legend">EDUCATION</legend>
					<div>
						<label for="further_degrees">Any Further Degrees: </label>
						<textarea name="further_degrees" id="further_degrees">{% if person.education.further_degrees %}{{ person.education.further_degrees }}{% endif %}</textarea>
						<a href="#sample_further_degrees" class="fancybox" rel="group" title="Sample">Show Sample</a>
					<pre id="sample_further_degrees" style="display:none;">
					SAMPLE ENDUCATION PROFILE: (Any Further degrees)
					“
					School /university 4
					Degree
					Start Year – End Year

					School/University 3
					Degree
					Start year – End Year
					“
					</pre>

					<div><button name="education" class="ajax-button btn btn-primary">Submit</button></div>
					</div>
					<br/>
				</fieldset>
	
			</form>
			<!--EDUCATION ENDS-->	
			</div>
			<div class="form_tab tab-pane" id="career">
			<!--CAREER BEGINS-->	
				<form action="" method="POST" enctype="multipart/form-data">
		{% csrf_token %}
				<fieldset class="well the-fieldset">
					<legend class="well the-legend">CAREER</legend>
					<div class="required">	
						<label for="current_job">Current Job Title: </label>
						<input type="text" name="current_job" id="current_job" value="{% if person.career.job_title %}{{ person.career.job_title }}{% endif %}" />
					  <span style="color:#b94a48;" class="help-inline"></span>						
					</div>
					<div class="required">	
						<label for="current_company">Current Company: </label>
						<input type="text" name="current_company" id="current_company" value="{% if person.career.current_company %}{{ person.career.current_company }}{% endif %}"  />
					  <span style="color:#b94a48;" class="help-inline"></span>					
					</div>
					<div>	
						<label for="career_progression">Career Progression (First Job ... Current Job): </label>
						<textarea name="career_progression" id="career_progression">{% if person.career.career_progression %}{{ person.career.career_progression }}{% endif %}</textarea>
						<a href="#sample_career_progression" class="fancybox" rel="group" title="Sample">Show Sample</a>
					<pre id="sample_career_progression" style="display:none;">
						SAMPLE CAREER PROGRESSION (first job to current job):
						
						“
						Job Tiltle 1
						Company 1
						Description of the company in which you worked for the period as delineated below.
						Start date – End Date
						
						Director
						ABC Company, New Delhi
						Privately held company conducting business in  randomized controlled trials.
						October 2004 – December 2007 (3 years 3 months) 
						
						Title..
						XYZ Company
						Random
						1997 – 2002 (5 years)
						
						Graduate Engineer
						ABCXYZ company
						1994 – 1997
						“
					</pre>

					</div>
					<br/>		
					<div style="clear:both; height:auto; width:auto;">
						<label for="job_function">Current Job Function: </label>
						<div name="job_function" id="job_function" style="height:auto;width:auto;"></div>	
					</div>
					<div style="clear:both;">
						<br/>
						<label for="industry_sector">Industry Sector: </label>
						<div name="industry_sector" id="industry_sector" style="height:auto;width:auto;"></div>	
					</div>
					<br/>
					<div style="clear:both;">	
						<br/>
						<label for="positions_held">Professional/Industry affiliations, Positions held: </label>
						<textarea name="positions_held" id="positions_held">{% if person.career.positions_held %}{{ person.career.positions_held }}{% endif %}</textarea>
					<div><button name="career" class="ajax-button btn btn-primary">Submit</button></div>
					</div>
					<br/>		
				</fieldset>
			</form>
			<!--CAREER ENDS-->	
			</div>
			<div class="form_tab tab-pane" id="interests">
			<!--WEB,INTERESTS BEGINS-->	
				<form method="POST" action="" enctype="multipart/form-data">
		{% csrf_token %}
				<fieldset class="well the-fieldset">
					<legend class="well the-legend">INTERESTS</legend>
					<div>	
						<label for="website">Website: </label>
						<input type="text" name="website" id="website" value="{% if person.interests.website %}{{ person.interests.website }}{% endif %}" />
					</div>
					<br/>		
					<div>	
						<label for="facebook_profile">Facebook Profile: </label>
						<input type="text" name="facebook_profile" id="facebook_profile" value="{% if person.interests.facebook_profile %}{{ person.interests.facebook_profile }}{% endif %}" />
					</div>
					<br/>		
					<div>	
						<label for="linkedin_profile">Linkedin Profile: </label>
						<input type="text" name="linkedin_profile" id="linkedin_profile" value="{% if person.interests.linkedin_profile %}{{ person.interests.linkedin_profile }}{% endif %}" />
					</div>
					<br/>		
					<div>
						<label for="hobbies_category">Hobbies, Interests(Select multiple entries): </label>
						<select name="hobbies_category" id="hobbies_category"></select>
						<div style="clear:both;" name="hobbies_name" id="hobbies_name"></div>
					</div>
					<br/>
					<div style="clear:both;">	
						<label for="comments">Any other Interest/hobbies: </label>
						<textarea name="comments" id="comments">{% if person.interests.comments %}{{ person.interests.comments }}{% endif %}</textarea>
					</div>
					<br/>		
					<div>	
						<label for="lanuages_spoken">Languages Spoken: </label>
						<div id="languages_spoken"></div>
					</div>
					<br/>		
					<div style="clear:both">	
						<br/>
						<label for="poli">Poli: </label>
						<div id="poli"></div>
					</div>
					<br/>		
				
					<div><button name="interests" class="ajax-button btn btn-primary">Submit</button></div>
				</fieldset> 

				<!--WEB,INTERESTS END-->	
				</form>
			</div>
			<div class="form_tab tab-pane" id="spouse" style="clear:both;">
			<form action="" method="POST" enctype="multipart/form-data">
		{% csrf_token %}
			<!--SPOUSE FORM BEGINS-->	
				<fieldset class="well the-fieldset">
					<legend class="well the-legend">FAMILY</legend>	
					<div>
						<label for="marital_status">Are you married? </label>			
						<input type="radio" name="marital_status" value="no" {% if not person.family.marital_status %}checked{% endif %}/>No	&nbsp; 
						<input type="radio" name="marital_status" value="yes" {% if person.family.marital_status %}checked{% endif %}/>Yes &nbsp; 
					</div>	
					<div id="spouse_form" style="">	
						<br/>
						SPOUSE	
						<div>
							<label for="spouse_name">Spouse: </label>
							<input type="text" name="spouse_name" id="spouse_name" value="{{person.family.spouse.name|default_if_none:''}}" />
					    <span style="color:#b94a48;" class="help-inline"></span>										
						</div>
						<div>
							<label for="spouse_nickname">Nickname: </label>
							<input type="text" name="spouse_nickname" id="spouse_nickname" value="{{person.family.spouse.nickname|default_if_none:''}}" />
						</div>
						<div>	
							<label for="spouse_datepicker">Birth date: </label>
							<input type="text" name="spouse_birthdate" id="spouse_datepicker" value="{{person.family.spouse.birthdate|default_if_none:''}}"  />
					    <span style="color:#b94a48;" class="help-inline"></span>										
							<span class="additional">	
								 &nbsp; Do you want to display this on your profile to others?
								<input type="radio" name="show_spouse_birthdate" value="yes"  {% if person.family.spouse.show_birthdate %}checked{% endif %} />Yes
								<input type="radio" name="show_spouse_birthdate" value="no" {% if not person.family.spouse.show_birthdate %}checked{% endif %}   />No &nbsp; 
							</span>
						</div>
						<div>
							<label for="spouse_yearpicker">Year Of Graduation: </label>
							<select name="spouse_year_graduation" id="spouse_yearpicker"></select>
						</div>
						<div>
							<label for="spouse_branch_picker">Branch: </label>
							<select name="spouse_branch" id="spouse_branch_picker"></select>
						</div>
						<div>
							<label for="spouse_degree_picker">Degree: </label>
							<select name="spouse_degree" id="spouse_degree_picker"></select>	
						</div>
						<div>
							<label for="spouse_further_degrees">Any further degrees: </label>
							<textarea name="spouse_further_degrees" id="spouse_further_degrees">{{person.family.spouse.further_degrees|default_if_none:''}}</textarea>
						</div>
						<div>
							<label for="spouse_roorkee_alum">Roorkee Alum </label>
							<input type="radio" name="spouse_roorkee_alum" value="Yes" {% if person.family.spouse.roorkee_alum %}checked{% endif %}/> Yes &nbsp; 
							<input type="radio" name="spouse_roorkee_alum" value="No" {% if not person.family.spouse.roorkee_alum %}checked{% endif %}/>No	
						</div>
						<div>	
							<label for="spouse_current_job">Current Job Title: </label>
							<input type="text" name="spouse_current_job" id="spouse_current_job" value="{{person.family.spouse.job_title|default_if_none:''}}" />
						</div>
						<div>	
							<label for="spouse_current_company">Current Company: </label>
							<input type="text" name="spouse_current_company" id="spouse_current_company" value="{{person.family.spouse.current_company|default_if_none:''}}" />
						</div>
						<!--CHILD FORM-->
						<br/><br/>
						<div id="child_form">	
						</div>
						<!--END CHILD FORM-->
						<div>
							<label>No. of children </label>
							<input type="text" name='child_count' id="child_count" readonly="readonly" />
						</div>
						<button style="float:left;" id="child_button" class="btn btn-info" name="child_button">Add a child</button>
						<button id="child_remove" class="btn btn-warning" name="child_remove">Remove a child</button>
					</div>
					<br/>		
						<div><button name="family" class="ajax-button btn btn-primary">Submit</button></div>
				</fieldset>
				</form>
			<!--SPOUSE FORM ENDS-->
			</div>
			<div class="form_tab">
				<!--<button  id="form_submit" type="submit" class="btn btn-primary default" name="">Submit</button>-->
			</div>
		</div>
	</div>
	</div>
{% endblock %}

{% block script %}
	<script type="text/javascript" src="/static/js/jquery/jquery-1.9.1.js"></script>
	<script type="text/javascript" src="/static/js/jquery/jquery-ui.js"></script>
	<script>
	</script>
	<script type="text/javascript" src="/static/js/person/person_info.js"></script>
	<script type="text/javascript" src="/static/js/bootstrap/bootstrap.min.js"></script>

	<script type="text/javascript">	
	$(document).ready(function(){
		
		
		/*** CHILD HTML ***/
		function childHTML(){		
			var child_html = '';
			child_html += '<br/><br/><div class="child_form  child_form'+child_count.toString()+'">CHILD'+child_count.toString()+'	<div>				<label for="child_name">Name: </label>					<input type="text" name="child_name'+child_count.toString()+'" id="child_name" value="{{ child.name|default_if_none:'' }}" />						    <span style="color:#b94a48;" class="help-inline"></span>	</div>';
			
			child_html += '<div>					<label for="child_nickname">Nickname: </label>					<input type="text" name="child_nickname'+child_count.toString()+'" id="child_nickname" value="{{ child.nickname|default_if_none:'' }}" />				</div>';								
			
			child_html += '<div>		<label for="child_datepicker">Birth date: </label>					<input type="text" name="child_birthdate'+child_count.toString()+'" id="child_datepicker'+child_count.toString()+'" />					    <span style="color:#b94a48;" class="help-inline"></span>				<span class="additional">						 &nbsp; Do you want to display this on your profile to others?					<input type="radio" checked name="show_child_birthdate'+child_count.toString()+'" value="yes" />Yes					<input type="radio" name="show_child_birthdate'+child_count.toString()+'" value="no" />No &nbsp; 				</span>		</div>';				
			
			child_html += '<div>					<label for="chlid_seeking_matrimony">Seeking Matrimony? </label>					<input type="radio" checked name="seeking_matrimony'+child_count.toString()+'" value="yes"/> Yes &nbsp; 					<input type="radio" name="seeking_matrimony'+child_count.toString()+'" value="no" checked/>No						<span class="additional">						 &nbsp; Do you want to display this on your profile to others?					<input type="radio" checked name="show_child_matrimony'+child_count.toString()+'" value="yes" />Yes					<input type="radio" name="show_child_matrimony'+child_count.toString()+'" value="no" />No &nbsp; 				</span>		</div><br/>';
			
			child_html += '<div>					<label for="child_yearpicker">Year Of Graduation: </label>					<select name="child_year_graduation'+child_count.toString()+'" class="child_yearpicker" id="child_yearpicker" value="{{ child.birthdate|default_if_none:'' }}" ></select>				</div>';
			
			child_html += '<div>					<label for="child_branch_picker">Branch: </label>					<select name="child_branch'+child_count.toString()+'" id="child_brach_picker" class="child_branch_picker"></select>				</div>';							
			
			child_html += '<div>					<label for="child_degree_picker">Degree: </label>					<select name="child_degree'+child_count.toString()+'" id="child_degree_picker" class="child_degree_picker"></select>					</div>';							
			
			child_html += '<div>					<label for="child_further_degrees">Any further degrees: </label>					<textarea name="child_further_degrees'+child_count.toString()+'" id="child_further_degrees">{{ child.further_degrees|default_if_none:'' }}</textarea>				</div>';								
			
			child_html += '<div>					<label for="child_roorkee_alum">Roorkee Alum </label>					<input type="radio" name="child_roorkee_alum'+child_count.toString()+'" value="Yes" {% if child.roorkee_alum %}checked{% endif %}  /> Yes &nbsp; 					<input type="radio" checked name="child_roorkee_alum'+child_count.toString()+'" value="No" {% if not child.roorkee_alum %}checked{% endif %}  />No					</div>';								
			
			child_html += '<div>					<label for="child_current_job">Current Job Title: </label>					<input type="text" name="child_current_job'+child_count.toString()+'" id="spouse_current_job" value="{{ child.job_title|default_if_none:'' }}" />				</div>';								
			
			child_html += '<div>						<label for="child_current_company">Current Company: </label>					<input type="text" name="child_current_company'+child_count.toString()+'" id="child_current_company" value="{{ child.current_company|default_if_none:'' }}" />				</div>				<br/>	</div></div> ';		
	
			return child_html;
		}

		/*** DEGREES ***/
		{% for degree in degrees %}
			$('#degree_picker').append($('<option />').val('{{degree.name}}').html('{{degree.name}}'));
			$('#spouse_degree_picker').append($('<option />').val('{{degree.name}}').html('{{degree.name}}'));
		{% endfor %}

		/*** BRANCHES ***/
		{% for branch in branches %}
			$('#branch_picker').append($('<option />').val('{{branch.code}}').html('{{branch.name}}'));
			$('#spouse_branch_picker').append($('<option />').val('{{branch.code}}').html('{{branch.name}}'));
		{% endfor %}
		
		/*** INDUSTRIES ***/
		{% for industry in industries %}
			$('#industry_sector').append('<span style="width:240px;height:24px;" class="span_industry"><input type="checkbox" value="{{industry.name}}" name="industries" {% for industry_sector in person.career.industry_sectors.all %}{% if industry_sector.name == industry.name %}checked{% endif %}{% endfor %}  />{{industry.name}} &nbsp; </span>');
		{% endfor %}
		
		/*** JOBS ***/
		{% for job in jobs %}
			$('#job_function').append('<span style="width:300px;height:24px;" class="span_job"><input type="checkbox" value="{{job.name}}"  {% for job_function in person.career.job_functions.all %}{% if job_function.name == job.name %}checked{% endif %}{% endfor %}  name="jobs" />{{job.name}} &nbsp; </span>');
		{% endfor %}

		/*** POLI ***/
		{% for p in poli %}
			$('#poli').append('<span style="width:240;height:24px;" class="span_poli"><input type="checkbox" value="{{p.name}}"  {% for po in person.interests.poli.all %}{% if po.name == p.name %}checked{% endif %}{% endfor %} name="poli" />{{p.name}} &nbsp; </span>');
		{% endfor %}

		/*** LANGUAGES ***/
		{% for language in languages %}
			$('#languages_spoken').append('<span style="width:240;height:24px;" class="span_languages"><input type="checkbox" value="{{language.name}}"  {% for l in person.interests.languages.all %}{% if l.name == language.name %}checked{% endif %}{% endfor %} name="languages" />{{language.name}} &nbsp; </span>');
		{% endfor %}

		/*** HOBBIES ***/
		var cat=''
		{% for hobby in hobbies %}
			if(cat != '{{ hobby.category }}'){
				$('#hobbies_category').append($('<option />').val('{{ hobby.category }}').html('{{ hobby.category }}'));
			}
			


			$('#hobbies_name').append('<span id="{{hobby.category}}" style="width:240px;height:24px;{% if forloop.counter != 1 %}display:none;{% endif %} " class="span_hobby {{ hobby.category }}"><input type="checkbox" value="{{ hobby.name }}_{{ hobby.category }}" name="hobbies" {% for h in person.interests.hobbies.all %}{% if h.name == hobby.name and h.category == hobby.category %}checked{% endif %}{% endfor %} />{{hobby.name}} &nbsp; </span>');
			cat = '{{ hobby.category }}'; 
		{% endfor %}

		/*** Dynamic Change of Hobbies ***/
		$('#hobbies_category').change(function(){
			var category = $(this).val();
			$('.span_hobby').css("display","none");
			$.each($('.span_hobby'),function(){
				if($(this).attr("id") == category){
					$(this).css("display","block");
				}
			});	
		});

		
		/*** Alternate address addition ***/
		var alternate_count=0;
		$('#alternate_button').click(function(){
			if(alternate_count>=3){
				alert("You can't add more than 3 alternate address");
				return false;
			}
			alternate_count++;
			var temp = alternate_count + 1;
			$('.clearfix'+temp.toString()).css("display","block");
			/* $(function() {
				var addresspickerMap = $( ".addresspicker_map"+temp.toString() ).addresspicker({
					regionBias: "fr",
					elements: {
						map:"#map"+temp.toString(),
					}
				});

				$('#reverseGeocode'+temp.toString()).change(function(){ 
					$(".addresspicker_map"+temp.toString()).addresspicker("option", "reverseGeocode", ($(this).val() === 'true'));
				});
				var gmarker = addresspickerMap.addresspicker( "marker");
				gmarker.setVisible(true);
				addresspickerMap.addresspicker( "updatePosition");
			});*/
			return false;
		});
		
		
		/*** Child form addition/removal script ***/
		var child_count = 0;
		$("#child_remove").click(function(){
			if(child_count<=0){
				alert("No child is added.");
				return false;
			}
			$('.child_form'+child_count.toString()).remove();
			child_count--;
			$('#child_count').val(child_count.toString());
			return false;
		});

		$('#child_button').click(function(){
			if(child_count>=10){
				alert("You can't add any more child forms :D");
				return false;
			}
			child_count++; 
			$('#child_count').val(child_count.toString());
		
			$('#child_form').append(childHTML());

			/*** Child Form Datepickers ***/
			$('#child_datepicker'+child_count.toString()).datepicker({changeMonth: false, changeYear: true, yearRange: '1950:2100'})
			for (i = new Date().getFullYear(); i > 1900; i--){
				$('.child_yearpicker').append($('<option />').val(i).html(i));
			}
					
			{% for degree in degrees %}
				$('.child_degree_picker').append($('<option />').val('{{degree.name}}').html('{{degree.name}}'));
			{% endfor %}
			{% for branch in branches %}
				$('.child_branch_picker').append($('<option />').val('{{branch.code}}').html('{{branch.name}}'));
			{% endfor %}
			return false;
		});
		//Show spouse and children forms
		{% if person.family.marital_status %}
			$('#spouse_form').css("display","block");
			$('#spouse_branch_picker option:contains("{{ person.family.spouse.branch.name }}")').prop('selected',true);
			$('#spouse_degree_picker option:contains("{{ person.family.spouse.degree.name }}")').prop('selected',true);
			$('#spouse_yearpicker option:contains("{{ person.family.spouse.graduation_year }}")').prop('selected',true);	
			{% for child in person.family.children.all %}
				child_count++;				
				var child_html = '';
				child_html += '<br/><br/><div class="child_form  child_form'+child_count.toString()+'">CHILD'+child_count.toString()+'	<div>				<label for="child_name">Name: </label>					<input type="text" name="child_name'+child_count.toString()+'" id="child_name" value="{{ child.name|default_if_none:'' }}" />						    <span style="color:#b94a48;" class="help-inline"></span>	</div>';
				
				child_html += '<div>					<label for="child_nickname">Nickname: </label>					<input type="text" name="child_nickname'+child_count.toString()+'" id="child_nickname" value="{{ child.nickname|default_if_none:'' }}" />				</div>';								
				
				child_html += '<div>		<label for="child_datepicker">Birth date: </label>					<input type="text" name="child_birthdate'+child_count.toString()+'" id="child_datepicker'+child_count.toString()+'" value="{{ child.birthdate|default_if_none:'' }}" />					    <span style="color:#b94a48;" class="help-inline"></span>				<span class="additional">						 &nbsp; Do you want to display this on your profile to others?					<input type="radio" checked name="show_child_birthdate'+child_count.toString()+'" value="yes" {% if child.show_birthdate %}checked{% endif %}  />Yes					<input type="radio" name="show_child_birthdate'+child_count.toString()+'" value="no" {% if not child.show_birthdate %}checked{% endif %}   />No &nbsp; 				</span>		</div>';				
				
				child_html += '<div>					<label for="chlid_seeking_matrimony">Seeking Matrimony? </label>					<input type="radio" checked name="seeking_matrimony'+child_count.toString()+'" value="yes" {% if child.seeking_matrimony %}checked{% endif %}  /> Yes &nbsp; 					<input type="radio" name="seeking_matrimony'+child_count.toString()+'" value="no" {% if not child.seeking_matrimony %}checked{% endif %}   checked/>No						<span class="additional">						 &nbsp; Do you want to display this on your profile to others?					<input type="radio" checked name="show_child_matrimony'+child_count.toString()+'" value="yes" {% if child.show_matrimony %}checked{% endif %}   />Yes					<input type="radio" name="show_child_matrimony'+child_count.toString()+'" value="no" {% if not child.show_matrimony %}checked{% endif %}   />No &nbsp; 				</span>		</div><br/>';
				
				child_html += '<div>					<label for="child_yearpicker">Year Of Graduation: </label>					<select name="child_year_graduation'+child_count.toString()+'" class="child_yearpicker" id="child_yearpicker"></select>				</div>';
				
				child_html += '<div>					<label for="child_branch_picker">Branch: </label>					<select name="child_branch'+child_count.toString()+'" id="child_brach_picker" class="child_branch_picker"></select>				</div>';							
				
				child_html += '<div>					<label for="child_degree_picker">Degree: </label>					<select name="child_degree'+child_count.toString()+'" id="child_degree_picker" class="child_degree_picker"></select>					</div>';							
				
				child_html += '<div>					<label for="child_further_degrees">Any further degrees: </label>					<textarea name="child_further_degrees'+child_count.toString()+'" id="child_further_degrees">{{ child.name|default_if_none:'' }}</textarea>				</div>';								
				
				child_html += '<div>					<label for="child_roorkee_alum">Roorkee Alum </label>					<input type="radio" name="child_roorkee_alum'+child_count.toString()+'" value="Yes"/> Yes &nbsp; 					<input type="radio" checked name="child_roorkee_alum'+child_count.toString()+'" value="No"/>No					</div>';								
				
				child_html += '<div>					<label for="child_current_job">Current Job Title: </label>					<input type="text" name="child_current_job'+child_count.toString()+'" id="spouse_current_job" value="{{ child.job_title|default_if_none:'' }}" />				</div>';								
				
				child_html += '<div>						<label for="child_current_company">Current Company: </label>					<input type="text" name="child_current_company'+child_count.toString()+'" id="child_current_company" value="{{ child.current_company|default_if_none:'' }}" />				</div>				<br/>	</div></div> ';		
	
				$("#child_form").append(child_html);
				$('#child_datepicker'+child_count.toString()).datepicker({changeMonth: false, changeYear: true, yearRange: '1950:2100'})
				for (i = new Date().getFullYear(); i > 1900; i--){
					$('.child_yearpicker').append($('<option />').val(i).html(i));
				}
						
				{% for degree in degrees %}
					$('.child_degree_picker').append($('<option />').val('{{degree.name}}').html('{{degree.name}}'));
				{% endfor %}
				{% for branch in branches %}
					$('.child_branch_picker').append($('<option />').val('{{branch.code}}').html('{{branch.name}}'));
				{% endfor %}
				
				
				$('select[name=child_branch'+child_count.toString()+'] option:contains("{{ child.branch.name }}")').prop('selected',true);
				$('select[name=child_degree'+child_count.toString()+'] option:contains("{{ child.branch.name }}")').prop('selected',true);
				$('select[name=child_year_graduation'+child_count.toString()+'] option:contains("{{ child.graduation_year }}")').prop('selected',true);
		{% endfor %}
			$('#child_count').val(child_count.toString());	
		{% endif %}
		

		/* MARITAL STATUS */
		{% if person.family.marital_status %}	
			$("#spouse_form").css("display","block");
			$("#spouse_form :input").removeAttr("disabled");
		{% endif %}

		$('#child_count').val(child_count);			
		//$('a[href="#contacts"]').tab('show'); // Select tab by name

		$('.ajax-button').click(function(){
			var form = $(this).closest('form')		
			
			/*** Validations ***/
			var valid=true;
			$.each(form.find(' .required :input:not(:button)'), function(){
				valid=true;
				$(this).siblings('span.help-inline').html('');
			
				if($(this).val() == ''){
					if($(this).attr("disabled")){
						return;
					}
					$(this).focus();
					valid=false;
					$(this).siblings('span.help-inline').html('This field is required.');
					return false;
				}	
			});
			
			if($(this).attr('name')=="contacts"){
				var phone;
				phone = $('input[name=phone_home]').val();
				if((isNaN(phone) && valid)){
					alert("Phone no. must contain only numbers (0-9)");
					$('input[name=phone_home]').focus();
					return false;
				}
				phone = $('input[name=phone_work]').val();
				if((isNaN(phone) && valid)){
					alert("Phone no. must contain only numbers (0-9)");
					$('input[name=phone_work]').focus();		
					return false;
				}
				phone = $('input[name=phone_mobile]').val();
				if((isNaN(phone) && valid)){
					alert("Phone no. must contain only numbers (0-9)");
					$('input[name=phone_mobile]').focus();	
					return false;
				}
			}
			if(!valid)	
				return valid;
			var formdata  =  $(form).serialize();	
			formdata += '&csrfmiddlewaretoken=' + $('input[name=csrfmiddlewaretoken]').val();
			formdata += '&type=' + $(this).attr('name');
			formdata += '&id={{ person.id }}';

			$.ajax({
				type: 'POST',
				data: formdata,
				url:'/person/profile/',
				dataType:"json",
				contentType:"json",
				success: function(d){
					if (d.success){
						$('.div-messages').html('<div class="messages" id="json-response" style="display:none;"><div class="control-group  messages-div"><p class="text-success messages-p">- '+ d.success +'<p></div></div><br/>');
					$("#json-response").fadeIn(3000);
					setTimeout(function(){
							$("#json-response").fadeOut(3000);	
						}, 5000);
					
					}
				},
			});
			return false;
		});

		/*** LIGHTBOX ***/
		$(".fancybox").fancybox();

		/*** ALTERNATE ADDRESS ***/
		{% if person.contacts.alternate_address1 %}
			$('#alternate_button').trigger('click');
		{% endif %}
		{% if person.contacts.alternate_address2 %}
			$('#alternate_button').trigger('click');
		{% endif %}
		{% if person.contacts.alternate_address3 %}
			$('#alternate_button').trigger('click');
		{% endif %}


		/*** BRANCH, DEGREE AND YEAR PICKERS ***/
		$('#branch_picker option:contains("{{ person.education.branch.name }}")').prop('selected',true);
		$('#degree_picker option:contains("{{ person.education.degree.name }}")').prop('selected',true);
		$('#yearpicker option:contains("{{ person.education.graduation_year }}")').prop('selected',true);	

		/** GENDER VALUE **/
		$('.gender-button').click(function(){
			$('input[name=gender]').val($(this).attr('name'));	
		});

	});
	</script>
	<script src="/static/js/jquery/jquery.fancybox.pack.js"></script>	
	<script src="/static/js/jquery/jquery.fancybox.js"></script>	
	<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript" src="/static/js/jquery/jquery-address.js"></script>
{% endblock %}

